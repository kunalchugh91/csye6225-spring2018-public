{
  "AWSTemplateFormatVersion": "2010-09-09",
    "Resources": {
        "EC2Instance": {
            "Type": "AWS::EC2::Instance",
            "Properties": {
                "ImageId": "ami-66506c1c",
                "InstanceType": "t2.micro",
                "DisableApiTermination": true,
                "AvailabilityZone":"us-east-1a",
                "SubnetId": {"Ref": "SUBNETID1"},
                "Volumes": [
                    { "VolumeId": { "Ref": "NewVolume" }, "Device": "/dev/sdk" }
                ]
            }
        },
        "NewVolume": {
            "Type": "AWS::EC2::Volume",
            "Properties": {
                "AvailabilityZone":"us-east-1a",
                "Size": 16,
                "VolumeType": "gp2"
            }
        },
        "DynamoDB": {
          "Type" : "AWS::DynamoDB::Table",
          "Properties" : {
            "AttributeDefinitions": [
              {
                 "AttributeName": "id",
                 "AttributeType": "N"
              }],
            "KeySchema" : [{
              "AttributeName" : "id",
              "KeyType" : "HASH"
            }],
            "ProvisionedThroughput" : {
              "ReadCapacityUnits" : "5",
              "WriteCapacityUnits" : "5"
            },
            "TableName" : "csye6225"
          }
        },
        "DBSubnetGroup": {
          "Type": "AWS::RDS::DBSubnetGroup",
          "Properties": {
            "DBSubnetGroupDescription": "My Subnet Group",
            "SubnetIds": [{ "Ref": "SUBNETID1" }, { "Ref": "SUBNETID2" }]
          }
        },
        "DBInstance" : {
         "Type": "AWS::RDS::DBInstance",
         "Properties": {
            "DBName"                : "csye6225",
            "Engine"                : "mysql",
            "EngineVersion"         : "5.6.37",
            "MultiAZ"               : "false",
            "PubliclyAccessible"    : "false",
            "StorageType"           : "gp2",
            "MasterUsername"        : "csye6225master",
            "DBInstanceClass"       : "db.t2.medium",
            "DBInstanceIdentifier"  : "csye6225-spring2018",
            "AllocatedStorage"      : "10",
            "DBSubnetGroupName"     : { "Ref" : "DBSubnetGroup" },
            "MasterUserPassword"    : "csye6225password"
         }
      }
    },
    "Parameters": {
        "SUBNETID1": {
          "Description" : "The subnet id",
          "Type": "String"
        },
        "SUBNETID2": {
          "Description" : "The subnet id",
          "Type": "String"
        }
      }
}
